<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
    <title>Reference</title>
    <link rel="stylesheet" href="../luadoc.css" type="text/css" />
	<!--meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/-->
</head>

<body>
<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->

<div id="main">

<div id="navigation">


<h1>LuaDoc</h1>
<ul>
	
	<li><a href="../index.html">Index</a></li>
	
</ul>


<!-- Module list -->



<!-- File list -->

<h1>Files</h1>
<ul>

	<li><strong>DevelopSettings.lua</strong></li>
	
</ul>






</div> <!-- id="navigation" -->

<div id="content">

<h1>File <code>DevelopSettings.lua</code></h1>







<h2>Functions</h2>
<table class="function_list">

	<tr>
	<td class="name" nowrap><a href="#DevelopSettings.getSpecTable">DevelopSettings.getSpecTable</a>&nbsp;()</td>
	<td class="summary">Get develop setting specifications table.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#DevelopSettings:adjustPhotos">DevelopSettings:adjustPhotos</a>&nbsp;(photos, undoTitle, ments, tmo)</td>
	<td class="summary">Adjust specified settings.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#DevelopSettings:appliesTo">DevelopSettings:appliesTo</a>&nbsp;(id, pvCode)</td>
	<td class="summary">Determine if specified setting applies to specified process version (see codes above)  </td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#DevelopSettings:applyAdjustments">DevelopSettings:applyAdjustments</a>&nbsp;(params)</td>
	<td class="summary">Apply develop setting adjustments, absolutely, respecting pre-requisites, and optionally: constraints.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#DevelopSettings:assureBasicSettings">DevelopSettings:assureBasicSettings</a>&nbsp;(photo, dev)</td>
	<td class="summary">Assure stabilized basic settings, of any process version.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#DevelopSettings:assureLegacyBasicSettings">DevelopSettings:assureLegacyBasicSettings</a>&nbsp;(photo, dev)</td>
	<td class="summary">Assures legacy settings are settled, generally after auto-tone applied, presumably in calling context.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#DevelopSettings:assurePrereqs">DevelopSettings:assurePrereqs</a>&nbsp;(photo, id, tmo)</td>
	<td class="summary">Assures pre-requisites are met for specified photo, specified adjustment.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#DevelopSettings:assurePv2012BasicSettings">DevelopSettings:assurePv2012BasicSettings</a>&nbsp;(photo, dev, tmo, atFlag, expSettings)</td>
	<td class="summary">Assures PV2012 settings are settled, generally after auto-tone applied, presumably in calling context.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#DevelopSettings:clearUserPresetCache">DevelopSettings:clearUserPresetCache</a>&nbsp;()</td>
	<td class="summary">forces re-init of dev-cache if warranted when init-ing settings.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#DevelopSettings:constrainSetting">DevelopSettings:constrainSetting</a>&nbsp;(id, value)</td>
	<td class="summary">for constraining individual settings whilst building.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#DevelopSettings:getAdobeDefaultSettings">DevelopSettings:getAdobeDefaultSettings</a>&nbsp;(fmt, pv)</td>
	<td class="summary">Get Adobe default settings, for reset purposes.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#DevelopSettings:getDevelopSettings">DevelopSettings:getDevelopSettings</a>&nbsp;(photo, autoToneFlag)</td>
	<td class="summary">Get develop settings for photo or video, when available.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#DevelopSettings:getFriendlySettingName">DevelopSettings:getFriendlySettingName</a>&nbsp;(id)</td>
	<td class="summary">Get friendly setting name given specified setting id.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#DevelopSettings:getItem">DevelopSettings:getItem</a>&nbsp;(id)</td>
	<td class="summary">Get item from lookup table.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#DevelopSettings:getLookup">DevelopSettings:getLookup</a>&nbsp;()</td>
	<td class="summary">Get lookup table for setting ID to setting spec.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#DevelopSettings:getPopupMenuItems">DevelopSettings:getPopupMenuItems</a>&nbsp;(pv)</td>
	<td class="summary">Get popup according to specified stipulation (process version - internal string representation).</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#DevelopSettings:getPvCode">DevelopSettings:getPvCode</a>&nbsp;(devSettings)</td>
	<td class="summary">Get process version code from specified develop settings.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#DevelopSettings:getUserPreset">DevelopSettings:getUserPreset</a>&nbsp;(name)</td>
	<td class="summary">Get Lr preset object based on preset (leaf) name.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#DevelopSettings:initUserPresets">DevelopSettings:initUserPresets</a>&nbsp;()</td>
	<td class="summary">initialize develop preset cache.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#DevelopSettings:isLegacy">DevelopSettings:isLegacy</a>&nbsp;(pv)</td>
	<td class="summary">Determine if process version (pass pv string or whole dev-settings table) is a legacy process version.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#DevelopSettings:isPv2012">DevelopSettings:isPv2012</a>&nbsp;(pv)</td>
	<td class="summary">Determine if process version (pass pv string or whole dev-settings table) is PV2012.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#DevelopSettings:new">DevelopSettings:new</a>&nbsp;(t)</td>
	<td class="summary">Constructor for new instance.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#DevelopSettings:newClass">DevelopSettings:newClass</a>&nbsp;(t)</td>
	<td class="summary">Constructor for extending class.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#DevelopSettings:transferAdjustments">DevelopSettings:transferAdjustments</a>&nbsp;(params)</td>
	<td class="summary">Transfer adjustments from one photo to one or more photos  </td>
	</tr>

</table>






<br/>
<br/>




<h2><a name="functions"></a>Functions</h2>
<dl class="function">



<dt><a name="DevelopSettings.getSpecTable"></a><strong>DevelopSettings.getSpecTable</strong>&nbsp;()</dt>
<dd>
Get develop setting specifications table. 





<h3>Usage:</h3>
<ul><pre class=example>call this method insted of accessing dev-set table directly, since in future, it's format may change, but this method will still return the same thing. </pre></ul>





</dd>




<dt><a name="DevelopSettings:adjustPhotos"></a><strong>DevelopSettings:adjustPhotos</strong>&nbsp;(photos, undoTitle, ments, tmo)</dt>
<dd>
Adjust specified settings. 


<h3>Parameters:</h3>
<ul>
	
	<li>
	  <code><em>photos</em></code>: (array of LrPhoto, reauired) photos to adjust.
	</li>
	
	<li>
	  <code><em>undoTitle</em></code>: (string, reauired) alias: presetName.
	</li>
	
	<li>
	  <code><em>ments</em></code>: (table, required) adjust-ments to make, as a table of name/value pairs.
	</li>
	
	<li>
	  <code><em>tmo</em></code>: (number, default=10) seconds to wait for catalog - ignored if already has write access. 
	</li>
	
</ul>




<h3>Usage:</h3>
<ul>
	
	<li><pre class=example>This wrapper to roll adjustments into a preset and optionally wrap for catalog access - does *NOT* assure pre-requisites..</pre></li>
	
	<li><pre class=example>synchronous - must be called from async task. </pre></li>
	
</ul>



<h3>Return values:</h3>
<ol>
	
	<li>status</li>
	
	<li>message </li>
	
</ol>



</dd>




<dt><a name="DevelopSettings:appliesTo"></a><strong>DevelopSettings:appliesTo</strong>&nbsp;(id, pvCode)</dt>
<dd>
Determine if specified setting applies to specified process version (see codes above) 


<h3>Parameters:</h3>
<ul>
	
	<li>
	  <code><em>id</em></code>: 
	</li>
	
	<li>
	  <code><em>pvCode</em></code>: 
	</li>
	
</ul>




<h3>Usage:</h3>
<ul><pre class=example>if id in table, then response is definitive; if not in table, it assumes the setting *is* applicable - take care if care needs taking.. </pre></ul>





</dd>




<dt><a name="DevelopSettings:applyAdjustments"></a><strong>DevelopSettings:applyAdjustments</strong>&nbsp;(params)</dt>
<dd>
Apply develop setting adjustments, absolutely, respecting pre-requisites, and optionally: constraints. 


<h3>Parameters:</h3>
<ul>
	
	<li>
	  <code><em>params</em></code>: containing: <br>adjustmentRecords (array) elements: <br>    photo <br>    settings <br>    title <br>undoTitle (string, default is computed). <br>caption (string, optional) scope caption. <br>preConstrained (boolean, default=false) if true, constraints will not be re-evaluated. <br>metadataCache (lr-metadata cache, default=nil) if passed, will be used for efficient metadata access. <br>call (Call, default=nil) if passed, caption & progress will be updated. 
	</li>
	
</ul>




<h3>Usage:</h3>
<ul>
	
	<li><pre class=example>Must *NOT* be pre-wrapped for catalog access.</pre></li>
	
	<li><pre class=example>internally wrapped for error handling, so returns status, message instead of throwing errors, if possible.</pre></li>
	
	<li><pre class=example>operates synchronously, so must be called from async task. </pre></li>
	
</ul>



<h3>Return values:</h3>
<ol>
	
	<li>status (boolean) t or f.</li>
	
	<li>message (string) nil or error. </li>
	
</ol>



</dd>




<dt><a name="DevelopSettings:assureBasicSettings"></a><strong>DevelopSettings:assureBasicSettings</strong>&nbsp;(photo, dev)</dt>
<dd>
Assure stabilized basic settings, of any process version. 


<h3>Parameters:</h3>
<ul>
	
	<li>
	  <code><em>photo</em></code>: 
	</li>
	
	<li>
	  <code><em>dev</em></code>: 
	</li>
	
</ul>








</dd>




<dt><a name="DevelopSettings:assureLegacyBasicSettings"></a><strong>DevelopSettings:assureLegacyBasicSettings</strong>&nbsp;(photo, dev)</dt>
<dd>
Assures legacy settings are settled, generally after auto-tone applied, presumably in calling context. 


<h3>Parameters:</h3>
<ul>
	
	<li>
	  <code><em>photo</em></code>: 
	</li>
	
	<li>
	  <code><em>dev</em></code>: 
	</li>
	
</ul>




<h3>Usage:</h3>
<ul><pre class=example>Could also be called to assure photo has settled after changing process version. </pre></ul>





</dd>




<dt><a name="DevelopSettings:assurePrereqs"></a><strong>DevelopSettings:assurePrereqs</strong>&nbsp;(photo, id, tmo)</dt>
<dd>
Assures pre-requisites are met for specified photo, specified adjustment. 


<h3>Parameters:</h3>
<ul>
	
	<li>
	  <code><em>photo</em></code>: lr-photo
	</li>
	
	<li>
	  <code><em>id</em></code>: dev-settings ID, which may or may not have pre-requisites (will be auto-determined by this method).
	</li>
	
	<li>
	  <code><em>tmo</em></code>: catalog access timeout number in seconds - optional: default is 10. 
	</li>
	
</ul>




<h3>Usage:</h3>
<ul>
	
	<li><pre class=example>this is generally called when building relatively adjusted photo settings table, to avoid missing relative adjustments due to lack of existing setting.<br> Some methods also have built-in pre-req assurance, but that may be after-the-fact in the afore-mentioned case.</pre></li>
	
	<li><pre class=example>this gains access to catalog, makes adjustment, then commits it (exists catalog accessor), and sleeps, for *each* adjustment to *each* photo.<br> and so it is not a speed demon, to say the least. But I've yet to figure out a reliable settling algorithm that handles all cases. </pre></li>
	
</ul>



<h3>Return values:</h3>
<ol>
	
	<li>status (boolean) nil => error: see message; true => pre-req assured, no message accompaniment; false => no pre-req assurance need be satisfied for setting - see message for verbose logging...</li>
	
	<li>message (string) error or qualifying message, depending on status. </li>
	
</ol>



</dd>




<dt><a name="DevelopSettings:assurePv2012BasicSettings"></a><strong>DevelopSettings:assurePv2012BasicSettings</strong>&nbsp;(photo, dev, tmo, atFlag, expSettings)</dt>
<dd>
Assures PV2012 settings are settled, generally after auto-tone applied, presumably in calling context. 


<h3>Parameters:</h3>
<ul>
	
	<li>
	  <code><em>photo</em></code>: (LrPhoto, required)
	</li>
	
	<li>
	  <code><em>dev</em></code>: (table, optional) Initial develop settings, if already available in calling context.
	</li>
	
	<li>
	  <code><em>tmo</em></code>: (number, default=6) Number of seconds to allow for settling. Note - actual time required may depend on number of photos recently adjusted which have to settle.
	</li>
	
	<li>
	  <code><em>atFlag</em></code>: (boolean, default=false) 
	</li>
	
	<li>
	  <code><em>expSettings</em></code>: 
	</li>
	
</ul>




<h3>Usage:</h3>
<ul><pre class=example>Could also be called to assure photo has settled after changing process version. </pre></ul>



<h3>Return values:</h3>
<ol>
	
	<li>develop settings, once settled.</li>
	
	<li>error message, if unsettleable. </li>
	
</ol>



</dd>




<dt><a name="DevelopSettings:clearUserPresetCache"></a><strong>DevelopSettings:clearUserPresetCache</strong>&nbsp;()</dt>
<dd>
forces re-init of dev-cache if warranted when init-ing settings. 





<h3>Usage:</h3>
<ul><pre class=example>- you can call this, then cache will be auto-initialized upon first use, or initialize explicitly.. - your call. </pre></ul>





</dd>




<dt><a name="DevelopSettings:constrainSetting"></a><strong>DevelopSettings:constrainSetting</strong>&nbsp;(id, value)</dt>
<dd>
for constraining individual settings whilst building. 


<h3>Parameters:</h3>
<ul>
	
	<li>
	  <code><em>id</em></code>: 
	</li>
	
	<li>
	  <code><em>value</em></code>: 
	</li>
	
</ul>




<h3>Usage:</h3>
<ul>
	
	<li><pre class=example>this module supports constraining externally or internally, so far I usually constrain externally, using this method - your call though..</pre></li>
	
	<li><pre class=example>can also be used for looking up friendly name (title) for (enum) value. </pre></li>
	
</ul>





</dd>




<dt><a name="DevelopSettings:getAdobeDefaultSettings"></a><strong>DevelopSettings:getAdobeDefaultSettings</strong>&nbsp;(fmt, pv)</dt>
<dd>
Get Adobe default settings, for reset purposes.


<h3>Parameters:</h3>
<ul>
	
	<li>
	  <code><em>fmt</em></code>: 
	</li>
	
	<li>
	  <code><em>pv</em></code>: 
	</li>
	
</ul>








</dd>




<dt><a name="DevelopSettings:getDevelopSettings"></a><strong>DevelopSettings:getDevelopSettings</strong>&nbsp;(photo, autoToneFlag)</dt>
<dd>
Get develop settings for photo or video, when available. (not available when video has trim-end=nil).


<h3>Parameters:</h3>
<ul>
	
	<li>
	  <code><em>photo</em></code>: 
	</li>
	
	<li>
	  <code><em>autoToneFlag</em></code>: 
	</li>
	
</ul>








</dd>




<dt><a name="DevelopSettings:getFriendlySettingName"></a><strong>DevelopSettings:getFriendlySettingName</strong>&nbsp;(id)</dt>
<dd>
Get friendly setting name given specified setting id. 


<h3>Parameters:</h3>
<ul>
	
	<li>
	  <code><em>id</em></code>: adjustment ID 
	</li>
	
</ul>






<h3>Return value:</h3>
<ul>title should never be empty, and will never be nil (echos ID if not found in lookup table). </ul>



</dd>




<dt><a name="DevelopSettings:getItem"></a><strong>DevelopSettings:getItem</strong>&nbsp;(id)</dt>
<dd>
Get item from lookup table. 


<h3>Parameters:</h3>
<ul>
	
	<li>
	  <code><em>id</em></code>: 
	</li>
	
</ul>








</dd>




<dt><a name="DevelopSettings:getLookup"></a><strong>DevelopSettings:getLookup</strong>&nbsp;()</dt>
<dd>
Get lookup table for setting ID to setting spec. 





<h3>Usage:</h3>
<ul><pre class=example>Get lookup table using this method instead of direct access, for future-proofing. </pre></ul>





</dd>




<dt><a name="DevelopSettings:getPopupMenuItems"></a><strong>DevelopSettings:getPopupMenuItems</strong>&nbsp;(pv)</dt>
<dd>
Get popup according to specified stipulation (process version - internal string representation). 


<h3>Parameters:</h3>
<ul>
	
	<li>
	  <code><em>pv</em></code>: (string) process version - if nil, any pv will do, otherwise constrained.. 
	</li>
	
</ul>






<h3>Return value:</h3>
<ul>items - titles are friendly, values are items (as seen in dev-sets table at top of this module). </ul>



</dd>




<dt><a name="DevelopSettings:getPvCode"></a><strong>DevelopSettings:getPvCode</strong>&nbsp;(devSettings)</dt>
<dd>
Get process version code from specified develop settings. 


<h3>Parameters:</h3>
<ul>
	
	<li>
	  <code><em>devSettings</em></code>: - the whole sha-bango as obtained from photo. 
	</li>
	
</ul>






<h3>Return value:</h3>
<ul>pvCode which can be used in other methods which have pv-code param.. </ul>



</dd>




<dt><a name="DevelopSettings:getUserPreset"></a><strong>DevelopSettings:getUserPreset</strong>&nbsp;(name)</dt>
<dd>
Get Lr preset object based on preset (leaf) name. 


<h3>Parameters:</h3>
<ul>
	
	<li>
	  <code><em>name</em></code>: 
	</li>
	
</ul>




<h3>Usage:</h3>
<ul><pre class=example>@4/Apr/2014 20:45 only used by Ottomanic Importer. </pre></ul>





</dd>




<dt><a name="DevelopSettings:initUserPresets"></a><strong>DevelopSettings:initUserPresets</strong>&nbsp;()</dt>
<dd>
initialize develop preset cache. 





<h3>Usage:</h3>
<ul><pre class=example>initialize at the beginnig of each "run" when you'll be looking up user (not plugin) develop presets. </pre></ul>





</dd>




<dt><a name="DevelopSettings:isLegacy"></a><strong>DevelopSettings:isLegacy</strong>&nbsp;(pv)</dt>
<dd>
Determine if process version (pass pv string or whole dev-settings table) is a legacy process version. 


<h3>Parameters:</h3>
<ul>
	
	<li>
	  <code><em>pv</em></code>: 
	</li>
	
</ul>








</dd>




<dt><a name="DevelopSettings:isPv2012"></a><strong>DevelopSettings:isPv2012</strong>&nbsp;(pv)</dt>
<dd>
Determine if process version (pass pv string or whole dev-settings table) is PV2012. 


<h3>Parameters:</h3>
<ul>
	
	<li>
	  <code><em>pv</em></code>: 
	</li>
	
</ul>








</dd>




<dt><a name="DevelopSettings:new"></a><strong>DevelopSettings:new</strong>&nbsp;(t)</dt>
<dd>
Constructor for new instance. 


<h3>Parameters:</h3>
<ul>
	
	<li>
	  <code><em>t</em></code>: Starter table, with optional member: 'cleanup' - set true to have temporary plugin develop presets from *last* time deleted. 
	</li>
	
</ul>




<h3>Usage:</h3>
<ul>
	
	<li><pre class=example>Singleton for interfacing to develop settings subsystem.</pre></li>
	
	<li><pre class=example>You must initialize instance in init.lua - as of 30/May/2014, not part of framework by default. </pre></li>
	
</ul>





</dd>




<dt><a name="DevelopSettings:newClass"></a><strong>DevelopSettings:newClass</strong>&nbsp;(t)</dt>
<dd>
Constructor for extending class. 


<h3>Parameters:</h3>
<ul>
	
	<li>
	  <code><em>t</em></code>: 
	</li>
	
</ul>








</dd>




<dt><a name="DevelopSettings:transferAdjustments"></a><strong>DevelopSettings:transferAdjustments</strong>&nbsp;(params)</dt>
<dd>
Transfer adjustments from one photo to one or more photos 


<h3>Parameters:</h3>
<ul>
	
	<li>
	  <code><em>params</em></code>: (array of parameters, reauired) thusly:<br> metadataCache (LrMetadata cache, optional) if passed, be sure to include raw ids: path, isVirtualCopy, and fmt id: copyName.<br> fromPhoto (LrPhoto, reauired) source photo. toPhoto (LrPhoto *or* array of them, required) target photo(s). exclusions (table, default=nil) set of dev-setting names to be excluded, otherwise none will be excluded. inclusions (table, default=nil) set of dev-setting names to be included *** note: it's an error if exclusions are passed too. if inclusions not passed, all will be included unless excluded. timeout (number, default=10) number of seconds to contend for catalog access - ignored if pre-wrapped. exifToolSession (ExifToolSession, default=nil) not yet implemented, if passed, exiftool will be used to transfer settings via xmp, instead of sdk. Will require metadata read upon return. 
	</li>
	
</ul>




<h3>Usage:</h3>
<ul>
	
	<li><pre class=example>Does *NOT* assure pre-requisites, nor consider pv mismatching.</pre></li>
	
	<li><pre class=example>will wrap with catalog accessor if need be - recommend pre-wrapping if multiple target photos, or done in a loop with a bunch of source photos.</pre></li>
	
	<li><pre class=example>synchronous - must be called from async task. </pre></li>
	
</ul>



<h3>Return values:</h3>
<ol>
	
	<li>status (boolean) true iff aok, otherwise false/nil.</li>
	
	<li>message (string) error message - only if not aok. </li>
	
</ol>



</dd>


</dl>







</div> <!-- id="content" -->

</div> <!-- id="main" -->

<div id="about">
	<p><a href="http://validator.w3.org/check?uri=referer"><img src="http://www.w3.org/Icons/valid-xhtml10" alt="Valid XHTML 1.0!" height="31" width="88" /></a></p>
</div> <!-- id="about" -->

</div> <!-- id="container" -->	
</body>
</html>
